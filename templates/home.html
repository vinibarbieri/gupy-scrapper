{% extends 'base.html' %}

{% block title %}Início{% endblock %}

{% block content %}
<div class="grid md:grid-cols-3 gap-6">

  <!-- Coluna principal com aplicação e histórico -->
  <div class="md:col-span-2 space-y-6">
    <div class="text-2xl font-semibold">Automatizador de Currículos e Aplicações</div>

    <!-- Formulário de aplicação -->
    <form class="bg-gray-700 p-4 rounded shadow" method="POST">
      <label for="link" class="block text-sm mb-2">Link da vaga:</label>
      <input id="link" name="link" type="text" class="w-full p-2 rounded bg-gray-800 border border-gray-600 text-white" />
      <button class="mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white">Aplicar</button>
    </form>

    <!-- Tabela de candidaturas -->
    <div class="bg-gray-700 p-4 rounded shadow">
      <h3 class="text-lg font-semibold mb-4">Candidaturas Realizadas</h3>
      <table class="w-full text-sm text-left border-collapse">
        <thead>
          <tr class="bg-gray-600 text-gray-300">
            <th class="py-2 px-3">Data</th>
            <th class="py-2 px-3">Empresa</th>
            <th class="py-2 px-3">Cargo</th>
            <th class="py-2 px-3">Link</th>
          </tr>
        </thead>
        <tbody class="bg-gray-800">
          <tr class="border-b border-gray-600">
            <td class="py-2 px-3">22/04/2024</td>
            <td class="py-2 px-3">Empresa A</td>
            <td class="py-2 px-3">Dev Backend</td>
            <td class="py-2 px-3 text-blue-400 hover:underline cursor-pointer">Ver</td>
          </tr>
          <tr class="border-b border-gray-600">
            <td class="py-2 px-3">21/04/2024</td>
            <td class="py-2 px-3">Empresa B</td>
            <td class="py-2 px-3">Front-end</td>
            <td class="py-2 px-3 text-blue-400 hover:underline cursor-pointer">Ver</td>
          </tr>
          <tr>
            <td class="py-2 px-3">20/04/2024</td>
            <td class="py-2 px-3">Empresa C</td>
            <td class="py-2 px-3">Analista</td>
            <td class="py-2 px-3 text-blue-400 hover:underline cursor-pointer">Ver</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Perfil do candidato -->
  <div class="bg-gray-700 rounded-lg p-4 shadow-md">
    <h3 class="text-lg font-semibold mb-4">Perfil do candidato</h3>

    <p><span class="font-semibold">Nome:</span> {{ dados.nome or 'Não informado' }}</p>
    <p class="mt-2"><span class="font-semibold">E-mail:</span><br> {{ dados.email or 'Não informado' }}</p>
    <p class="mt-2"><span class="font-semibold">Telefone:</span><br> {{ dados.telefone or 'Não informado' }}</p>
    <p class="mt-2"><span class="font-semibold">CPF:</span><br> {{ dados.cpf or 'Não informado' }}</p>

    <div class="mt-4">
      <h4 class="font-semibold">Endereço:</h4>
      {% if dados.endereco %}
        <p>Rua: {{ dados.endereco.rua or 'Não informado' }}</p>
        <p>Número: {{ dados.endereco.numero or 'Não informado' }}</p>
        <p>Cidade: {{ dados.endereco.cidade or 'Não informado' }}</p>
        <p>Estado: {{ dados.endereco.estado or 'Não informado' }}</p>
        <p>CEP: {{ dados.endereco.cep or 'Não informado' }}</p>
      {% else %}
        <p class="text-gray-400 italic">Endereço não informado.</p>
      {% endif %}
    </div>

    <div class="mt-4">
      <h4 class="font-semibold">Formação:</h4>
      {% if dados.formacao %}
        <p>Curso: {{ dados.formacao.curso or 'Não informado' }}</p>
        <p>Instituição: {{ dados.formacao.instituicao or 'Não informado' }}</p>
        <p>Ano Início: {{ dados.formacao.ano_inicio or 'Não informado' }}</p>
        <p>Ano Fim: {{ dados.formacao.ano_fim or 'Não informado' }}</p>
      {% else %}
        <p class="text-gray-400 italic">Formação não informada.</p>
      {% endif %}
    </div>

    <div class="mt-4">
      <h4 class="font-semibold">Experiência:</h4>
      {% if dados.experiencias and dados.experiencias[0] %}
        <p><strong>Cargo:</strong> {{ dados.experiencias[0].cargo or 'Não informado' }}</p>
        <p><strong>Empresa:</strong> {{ dados.experiencias[0].empresa or 'Não informado' }}</p>
        <p><strong>Período:</strong> {{ dados.experiencias[0].inicio or 'Não informado' }} até {{ dados.experiencias[0].fim or 'Atual' }}</p>
        <p><strong>Descrição:</strong> {{ dados.experiencias[0].descricao or 'Não informado' }}</p>
      {% else %}
        <p class="italic text-gray-400">Sem experiências cadastradas.</p>
      {% endif %}
    </div>

    <div class="mt-4">
      <h4 class="font-semibold">Links:</h4>
      {% if dados.links %}
        <p>LinkedIn:
          {% if dados.links.linkedin %}
            <a href="{{ dados.links.linkedin }}" target="_blank" class="text-blue-400 hover:underline">{{ dados.links.linkedin }}</a>
          {% else %}
            <span class="text-gray-400 italic">Não informado</span>
          {% endif %}
        </p>
        <p>GitHub:
          {% if dados.links.github %}
            <a href="{{ dados.links.github }}" target="_blank" class="text-blue-400 hover:underline">{{ dados.links.github }}</a>
          {% else %}
            <span class="text-gray-400 italic">Não informado</span>
          {% endif %}
        </p>
      {% else %}
        <p class="text-gray-400 italic">Links não informados.</p>
      {% endif %}
    </div>

    <div class="mt-4">
      <h4 class="font-semibold">Currículo:</h4>
      {% if dados.curriculo_pdf %}
        <a href="{{ url_for('static', filename='uploads/' ~ dados.curriculo_pdf) }}" target="_blank" class="text-blue-400 hover:underline">
          {{ dados.curriculo_pdf }}
        </a>
      {% else %}
        <p class="text-gray-400 italic">Currículo não enviado.</p>
      {% endif %}
    </div>
  </div>

</div>
{% endblock %}
